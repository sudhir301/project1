<!DOCTYPE html>
<html>
  <head>
    <meta content="text/html; charset=utf-8" http-equiv="content-type">
    <title>load demo</title>
    <link rel="stylesheet" type="text/css" href="../css/common.css">
    <script src="../js/jquery-2.1.4.js"></script>
  </head>
  <body>
	<table width="100%" height="1000">
		<tbody>
			<tr>
				<td colspan="3" align="center" height="10px"><H1>Tool of Question Bank</H1><hr style="background: rgb(0, 0, 0);" /></td>
			</tr>
			<tr>
				<td width="20%" style="vertical-align: text-top;">
					<div id="leftPane">&nbsp;</div>
				</td>
				<td width="2px" style="background: rgb(0, 0, 0);"></td>
				<td width="80%" style="padding-left:20px">
					<div id="pageContent"></div>
				</td>
			</tr>
			<tr>
				<td colspan="3" style="text-align:right;vertical-align: bottom; height:10px;"></td>
			</tr>
		</tbody>
	</table>


	<script>
		$(document).ready(function(){
			console.log("Step 111");
			 $.getJSON( "lefttab.json", function(data, status, xhr ) {
				console.log("status :" +status);
				console.log("Step 12222");
			 	loadLeftPane(data);
			 }).fail(function( jqxhr, textStatus, error ) {
				var err = textStatus + ", " + error;
				console.log( "Request Failed: " + err );
			 });
		});      
	  
	 function loadLeftPane(data1){
		 console.log(data1);
		 output = "<ul>";
         for (var i in data1.urlData) {
        	 console.log("i="+i);
             output+="<li>" + data1.urlData[i].categoryName + "</li>";
             output+="<ul>"
             for (var j in data1.urlData[i].links) {
            	 output+="<li><a href='#' onclick=\"loadOnclick(\'"+ data1.urlData[i].links[j].displayUrl +"\')\">" +  data1.urlData[i].links[j].displayName + "</a></li>";
             }
             output+="</ul>"
        }
         output+="</ul>"
        $('#leftPane').html(output);  
	 }
	 
	 function loadOnclick(path1){
		//alert("Test 45893499 : " + path1 );
		$('#pageContent').load(path1, function( response, status, xhr ) {
			if ( status == "success" ) {
				//alert("successfully done");
				setImgSrc();
			}
		}).fail(function( jqxhr, textStatus, error ) {
			var err = textStatus + ", " + error;
			console.log( "Load the file : " + err );
		 }); 
	  }
	  
	  function setImgSrc(){
		  //alert("inside method ")
		   $('img').each(function() {
			   var urlPath =  "http://"+window.location.host +"/faq"+$(this).attr('data-src');
			   //alert($(this).attr('data-src'));
			   //alert("urlPath : "+ urlPath) 
			   $(this).attr('src',urlPath );
			});
	  }	
	  
    </script>
    
  </body>
</html>
